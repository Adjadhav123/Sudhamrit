<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Payment | Sudhamrit Dairy Farm</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f9f9f9;
        font-family: "Poppins", sans-serif;
      }

      .payment-container {
        max-width: 500px;
        margin: 100px auto;
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      .payment-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .payment-header h4 {
        font-weight: 600;
      }

      .btn-pay {
        background-color: #28a745;
        color: white;
        width: 100%;
        font-size: 16px;
      }

      .btn-pay:hover {
        background-color: #218838;
      }

      .btn-cancel {
        display: block;
        margin-top: 15px;
        text-align: center;
        color: #6c757d;
        text-decoration: none;
      }

      .btn-cancel:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div class="payment-container">
      <div class="payment-header">
        <h4>Payment Details</h4>
        <p class="text-muted">Complete your purchase securely</p>
      </div>

      <form action="/confirm_order" method="POST">
        <!-- Payment Method Dropdown -->
        <div class="mb-3">
          <label for="paymentMethod" class="form-label">Select Payment Method</label>
          <select class="form-select" id="paymentMethod" name="payment_method" required>
            <option value="">-- Choose Method --</option>
            <option value="Credit Card">Credit Card</option>
            <option value="Debit Card">Debit Card</option>
            <option value="UPI">UPI</option>
            <option value="Net Banking">Net Banking</option>
            <option value="Cash on Delivery">Cash on Delivery</option>
          </select>
        </div>

        <!-- Card Details (shown only if applicable) -->
        <div id="cardDetails">
          <div class="mb-3">
            <label for="cardName" class="form-label">Cardholder Name</label>
            <input
              type="text"
              class="form-control"
              id="cardName"
              name="cardName"
              placeholder="Enter cardholder name"
            />
          </div>

          <div class="mb-3">
            <label for="cardNumber" class="form-label">Card Number</label>
            <input
              type="text"
              class="form-control"
              id="cardNumber"
              name="cardNumber"
              placeholder="XXXX XXXX XXXX XXXX"
              maxlength="16"
            />
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="expiry" class="form-label">Expiry Date</label>
              <input
                type="text"
                class="form-control"
                id="expiry"
                name="expiry"
                placeholder="MM/YY"
              />
            </div>

            <div class="col-md-6 mb-3">
              <label for="cvv" class="form-label">CVV</label>
              <input
                type="password"
                class="form-control"
                id="cvv"
                name="cvv"
                maxlength="3"
                placeholder="123"
              />
            </div>
          </div>
        </div>

        <div class="text-center mb-4">
          <h5>Total Amount: <span class="text-success fw-bold">₹{{ total }}</span></h5>
        </div>

        <button type="submit" class="btn btn-pay">Pay Now</button>
        <a href="/cart" class="btn-cancel">← Go Back to Cart</a>
      </form>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      const paymentMethod = document.getElementById("paymentMethod");
      const cardDetails = document.getElementById("cardDetails");

      // Hide card fields for non-card payments
      paymentMethod.addEventListener("change", function () {
        if (
          this.value === "Credit Card" ||
          this.value === "Debit Card"
        ) {
          cardDetails.style.display = "block";
        } else {
          cardDetails.style.display = "none";
        }
      });

      // Default hidden
      cardDetails.style.display = "none";
    </script>
  </body>
</html>
